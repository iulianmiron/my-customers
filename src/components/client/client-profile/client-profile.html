<h2 flex>Profil client</h2>
<md-content flex style="max-height: 80vh">
	<md-card>
		<md-card-content>

			<form name="$ctrl.data.clientProfileForm" novalidate autocomplete="off">
				<md-input-container class="md-block">
					<label>Prenume</label>
					<md-icon>person</md-icon>
					<input 
						name="clientFirstName" 
						ng-model="$ctrl.data.client.firstName"
						ng-disabled="!$ctrl.status.editClient"
						minlength="2" md-maxlength="50" required
					>
					<div ng-messages="$ctrl.data.clientProfileForm.clientFirstName.$error">
						<div ng-message="required">Prenumele este obligatoriu</div>
						<div ng-message="md-maxlength">Prenumele trebuie sa aiba sub 50 de caractere</div>
						<div ng-message="minlength">Prenumele trebuie sa aiba peste 1 caracter</div>
			        </div>
				</md-input-container>

				<md-input-container class="md-block">
					<label>Nume</label>
					<md-icon>person</md-icon>
					<input 
						name="clientLastName"
						ng-model="$ctrl.data.client.lastName"
						ng-disabled="!$ctrl.status.editClient"
						minlength="2" md-maxlength="50" required
					>
					<div ng-messages="$ctrl.data.clientProfileForm.clientLastName.$error">
						<div ng-message="required">Numele este obligatoriu</div>
						<div ng-message="md-maxlength">Numele trebuie sa aiba sub 50 de caractere</div>
						<div ng-message="minlength">Numele trebuie sa aiba peste 1 caracter</div>
			        </div>
				</md-input-container>
				<div layout="row">
					<md-input-container flex="40">
						<label>Varsta</label>
						<md-icon>person</md-icon>
						<input 
							name="clientAge" type="number"
							ng-model="$ctrl.data.client.age"
							ng-disabled="!$ctrl.status.editClient"
							min="1" max="99" required 
						>
						<div ng-messages="$ctrl.data.clientProfileForm.clientAge.$error">
							<div ng-message="required">Varsta este obligatorie</div>
							<div ng-message="min">Varsta trebuie sa fie minim o cifra</div>
							<div ng-message="max">Varsta trebuie sa fie maxim 2 cifre</div>
			        	</div>
					</md-input-container>

					<md-input-container class="md-block">
						<label>Telefon</label>
						<md-icon>phone</md-icon>
						<input 
							name="clientPhoneNo" type="text"
							ng-model="$ctrl.data.client.phoneNumber"
							ng-disabled="!$ctrl.status.editClient"
							minlength="10" md-maxlength="10" required 
						>
						<div ng-messages="$ctrl.data.clientProfileForm.clientPhoneNo.$error">
							<div ng-message="required">Numarul de telefon este obligatoriu</div>
							<div ng-message="minlength, md-maxlength">Numarul de telefon trebuie sa inceapa cu zero si sa fie format din 10 cifre</div>
			        	</div>
					</md-input-container>
				</div>

				<md-input-container class="md-block">
					<label>Email</label>
					<md-icon>email</md-icon>
					<input 
						name="clientEmail" type="email" 
						ng-model="$ctrl.data.client.email"
						ng-disabled="!$ctrl.status.editClient"
						ng-pattern="/[\wd\-\_\.]+@[\wd\-\_\.]+\.[\wd\-\_\.]+/" required 
					>
					<div ng-messages="$ctrl.data.clientProfileForm.clientEmail.$error">
							<div ng-message="required">Adresa de email este obligatorie</div>
							<div ng-message="pattern">Adresa trebuie sa fie in formatul: user.name@email.com</div>
			        	</div>
				</md-input-container>

				<md-button ng-click="$ctrl.status.showMoreProfileDetails = !$ctrl.status.showMoreProfileDetails">
					Mai {{$ctrl.status.showMoreProfileDetails ? 'putine' : 'multe'}} detalii 
					<md-icon>keyboard_arrow_{{$ctrl.status.showMoreProfileDetails ? "up" : 'down'}}</md-icon>
				</md-button>

				<div ng-show="$ctrl.status.showMoreProfileDetails">
					<md-input-container class="md-block">
						<label>Tip ten</label>
						<input 
							ng-model="$ctrl.data.client.skinType"
							ng-disabled="!$ctrl.status.editClient"
					>
					</md-input-container>

					<md-input-container class="md-block">
						<label>Probleme medicale anterioare</label>
						<textarea md-select-on-focus 
							ng-model="$ctrl.data.client.previousMedicalConditions"
							ng-disabled="!$ctrl.status.editClient">
						</textarea>
					</md-input-container>

					<md-input-container class="md-block">
						<label>Tratamente anterioare</label>
						<textarea md-select-on-focus 
							ng-model="$ctrl.data.client.previousTreatments"
							ng-disabled="!$ctrl.status.editClient">
						</textarea>
					</md-input-container>

					<md-input-container class="md-block">
						<label>Produse de ingrijire folosite</label>
						<textarea md-select-on-focus 
							ng-model="$ctrl.data.client.skinCareProductsUsed"
							ng-disabled="!$ctrl.status.editClient">
						</textarea>
					</md-input-container>

					<md-input-container class="md-block">
						<label>Cum a auzit de mine</label>
						<textarea md-select-on-focus 
							ng-model="$ctrl.data.client.discovery"
							ng-disabled="!$ctrl.status.editClient">
						</textarea>
					</md-input-container>
				</div>
				<div layout="row" layout-align="end center">
					<md-button 
						class="md-raised md-default" 
						ng-show="$ctrl.status.editClient"
						ng-click="$ctrl.status.editClient = !$ctrl.status.editClient">
						<md-icon>cancel</md-icon>
						Renunta 
					</md-button>

					<md-button 
						class="md-raised md-primary" 
						ng-show="$ctrl.status.editClient"
						ng-disabled="$ctrl.data.clientProfileForm.$invalid"
						ng-click="$ctrl.actions.saveClientProfile($ctrl.data.client)">
						<md-icon>save</md-icon>
						Salveaza 
					</md-button>
					
					<md-button 
						class="md-raised md-default" 
						ng-show="!$ctrl.status.editClient"
						ng-click="$ctrl.status.editClient = !$ctrl.status.editClient">
						<md-icon>edit</md-icon>
						Editeaza 
					</md-button>
				</div>
			</form>
		</md-card-content>
	</md-card>
</md-content>